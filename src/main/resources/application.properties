# Spring
spring.application.name=query-service

# JPA / H2 for saved queries
spring.datasource.url=jdbc:h2:mem:queryservice
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=1h

# Server
server.port=8080

# Query service - multiple datasources (list; add more by incrementing index)
query-service.datasources[0].id=oracle-primary
query-service.datasources[0].vendor=oracle
query-service.datasources[0].jdbc-url=${ORACLE_JDBC_URL:jdbc:oracle:thin:@localhost:1521:XE}
query-service.datasources[0].username=${ORACLE_USERNAME:system}
query-service.datasources[0].password=${ORACLE_PASSWORD:password}
query-service.datasources[0].pool.maximum-pool-size=20
query-service.datasources[0].pool.minimum-idle=5
query-service.datasources[0].pool.connection-timeout=30000
query-service.datasources[0].pool.idle-timeout=600000
query-service.datasources[0].pool.max-lifetime=1800000

query-service.datasources[1].id=mssql-primary
query-service.datasources[1].vendor=mssql
query-service.datasources[1].jdbc-url=${MSSQL_JDBC_URL:jdbc:sqlserver://localhost:1433;databaseName=master}
query-service.datasources[1].username=${MSSQL_USERNAME:sa}
query-service.datasources[1].password=${MSSQL_PASSWORD:password}
query-service.datasources[1].pool.maximum-pool-size=20
query-service.datasources[1].pool.minimum-idle=5
query-service.datasources[1].pool.connection-timeout=30000
query-service.datasources[1].pool.idle-timeout=600000
query-service.datasources[1].pool.max-lifetime=1800000

# Cache
query-service.cache.enabled=true
query-service.cache.default-ttl-seconds=3600
query-service.cache.max-size=1000

# Retry
query-service.retry.enabled=true
query-service.retry.max-attempts=3
query-service.retry.initial-interval-ms=1000
query-service.retry.multiplier=2.0
query-service.retry.max-interval-ms=10000

# Queue
query-service.queue.enabled=true
query-service.queue.high-priority-workers=5
query-service.queue.normal-priority-workers=10
query-service.queue.low-priority-workers=5
query-service.queue.max-queue-size=1000

# Export
query-service.export.temp-directory=${java.io.tmpdir}/query-service-exports
query-service.export.cleanup-after-hours=24

# Streaming
query-service.streaming.default-page-size=100
query-service.streaming.max-page-size=1000

# Logging
logging.level.root=INFO
logging.level.com.queryservice=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
