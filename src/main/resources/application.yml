spring:
  application:
    name: query-service
  
  # Database connections for saved queries (using H2 for simplicity, can be changed)
  datasource:
    url: jdbc:h2:mem:queryservice
    driver-class-name: org.h2.Driver
    username: sa
    password: 
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: true
  
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=1h

server:
  port: 8080

query-service:
  databases:
    oracle:
      jdbc-url: ${ORACLE_JDBC_URL:jdbc:oracle:thin:@localhost:1521:XE}
      username: ${ORACLE_USERNAME:system}
      password: ${ORACLE_PASSWORD:password}
      pool:
        maximum-pool-size: 20
        minimum-idle: 5
        connection-timeout: 30000
        idle-timeout: 600000
        max-lifetime: 1800000
    mssql:
      jdbc-url: ${MSSQL_JDBC_URL:jdbc:sqlserver://localhost:1433;databaseName=master}
      username: ${MSSQL_USERNAME:sa}
      password: ${MSSQL_PASSWORD:password}
      pool:
        maximum-pool-size: 20
        minimum-idle: 5
        connection-timeout: 30000
        idle-timeout: 600000
        max-lifetime: 1800000
  
  cache:
    enabled: true
    default-ttl-seconds: 3600
    max-size: 1000
  
  retry:
    enabled: true
    max-attempts: 3
    initial-interval-ms: 1000
    multiplier: 2.0
    max-interval-ms: 10000
  
  queue:
    enabled: true
    high-priority-workers: 5
    normal-priority-workers: 10
    low-priority-workers: 5
    max-queue-size: 1000
  
  export:
    temp-directory: ${java.io.tmpdir}/query-service-exports
    formats:
      - CSV
      - JSON
      - EXCEL
    cleanup-after-hours: 24
  
  streaming:
    default-page-size: 100
    max-page-size: 1000

logging:
  level:
    root: INFO
    com.queryservice: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

